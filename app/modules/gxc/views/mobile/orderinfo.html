<link type="text/css" rel="stylesheet" href="../addons/qw_cca/template/assets/css/common.css">
<style>
    ul,li{padding:0;margin:0;list-style: none}
    .main-list{width:100%;height:40px;position: fixed;top:38px;color:#000;border-bottom: 1px solid #ccc;background-color: #fff}
    .main-list li{list-style: none;float: left;width:20%;padding: 1px 3px;line-height: 40px;text-align: center;}
    .table .sold{line-height: 25px;height:25px}
    .table p{position: absolute;right:20%;line-height: 25px;height:25px}
    .table .state{text-align: center;height:25px;line-height: 25px;}
    .table .state .ch-check{text-align: center;height:20px;}
    .table .products{    margin: 0 auto;}
    .table .lamp{text-align: center}
    .rule{width:90%;height:auto; padding: 10px;margin: 20px auto;border:1px solid #ccc;box-shadow: 0 0 10px #ccc}
    .rule p{text-align: center;font-size: 14px;height:20px;line-height: 20px;}
    table span{text-align: center;color:#a94442;font-weight: 800}
    .bg{ background: rgba(230,99,91,.3);  }
    .count{text-align: right;padding-right:20px;display: block  }
    .head-time{height:40px;line-height: 40px;font-size: 16px;text-align: center;color:#6d645e;font-weight: 500;display: block}
    #time{height:40px;line-height: 30px;font-size: 16px;text-align: center;color:#f00;font-weight: 800}
    .state a{text-decoration: none;list-style: none}
    .state a:hover{list-style: none;text-decoration: none;color:#a94442;}
</style>
<div class="head">
   <a href="javascript:history.back();" class="bn pull-left"><i class="fa fa-angle-left"></i></a>
    <span class="title">订单详情</span>
    <a href="#" class="bn pull-right" style="margin-right:30px;"></a>
</div>
<div style="height:38px" class="light_num">{{ order['star'] }}</div>
<span class="head-time">下单时间：<strong id="o_time">{{ order["submitted_at"] }}</strong></span>
<div id="time">倒计时显示</div>
<table class="table">
<tr>
    <td style="width:31%;text-align: center">商品</td>
    <td style="width:22%;text-align: center">价格</td>
    <td style="width:25%;text-align: center">状态</td>
    <td style="text-align: center;width:22%">宝莲灯</td>
</tr>
{% for item in order['product'] %}
<tr style="border:0">
    <td style="height:40px">
        <div class="products" style="background: url('{{ item['pic_url'] }}') top center no-repeat;background-size:cover;height:74px;width:74px"></div></td>
    <td style="height:20px">
        <div class="sold">
            <strong class="price pull-left text-danger"><i class="fa fa-yen"></i> {{ item['price'] }}</strong><i>{$item['pay_at']}</i>
        </div>
    </td>
    <td class="state">
       {% if item['status'] == 1 %}
       未发货
       {% elseif item['status']==2 %}
        已发货
        {% else %}
        待参与
        {% endif %}
    </td>
    <td class="lamp">
        <img src="1.png" style="width:34px;height: 50px;position: relative" id="img">
    </td>
</tr>
{% endfor %}
</table>
<span class="count">参与人数:<b class="canyu">{{ count }}</b></span>
<div class="rule">
    <p><b>温馨提示</b></p>
    <div style="text-indent:2em">
        转发的次数越多，你的宝莲灯开启的越多，倒计时结束后，次日我们将所有开启的宝莲灯对应的商品发送给你，
        在您收到货后，在【我的订单】中请给予公正的评价！
    </div>
</div>
<script>
    var interval = 1000;
    var time1=$("#o_time").html();
    var t_year=time1.substr(0,4);
    var t_month=time1.substr(5,2);
    var t_day=time1.substr(8,2);
    var t_hour=time1.substr(11,2);
    var t_minute=time1.substr(14,2);
    var t_second=time1.substr(17,2);

    function ShowCountDown(year,month,day,divname)
    {
        var now = new Date();
        var endDate = new Date(time2);
        var orderDate=new Date(time3);
        //console.log(endDate);
        var leftTime=endDate.getTime()+48*60*60*1000-now.getTime();
        var oversecond=parseInt((now.getTime()-orderDate.getTime())/1000);
        var leftsecond = parseInt(leftTime/1000);
        var day1=Math.floor(leftsecond/(60*60*24));
        var hour=Math.floor((leftsecond-day1*24*60*60)/3600);
        var minute=Math.floor((leftsecond-day1*24*60*60-hour*3600)/60);
        var second=Math.floor(leftsecond-day1*24*60*60-hour*3600-minute*60);
        var cc = document.getElementById(divname);
        if(leftTime>0){
            cc.innerHTML = "距离订单结束"+"还有："+day1+"天"+hour+"小时"+minute+"分"+second+"秒";
        }else{
            cc.innerHTML = "订单已结束";
        }
    }
    window.setInterval(function(){ShowCountDown(t_year,t_month,t_day,'time');}, interval);
</script>

